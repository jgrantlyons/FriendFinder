<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder!</title>
  <!-- <script src="./data/friends.js"></script>
  <script src="./routing/apiRoutes.js"></script>
  <script src="./routing/htmlRoutes.js"></script> -->
   <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" 
    crossorigin="anonymous"></script> 

  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
    crossorigin="anonymous">

  <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>

</head>

<body>
  <div class="container">

    <!-- Content here -->
    <form>
      <!-- name -->
      <div class="form-group">
        <label>Name</label>
        <input type="name" class="form-control" id="name" " placeholder=" Insert name here">
        <small id="emailHelp" class="form-text text-muted">What name would you like to be called by?</small>
      </div>

      <!-- picture link -->
      <div class="form-group">
        <label>Profile Picture</label>
        <input type="picture" class="form-control" id="pictureURL" " placeholder=" Insert link to photo here">
        <small id="emailHelp" class="form-text text-muted">Please provide a URL</small>
      </div>

      <!-- q1 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Do you like going out or staying in?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="0" class="btn button btn-secondary">1</button>
          <button type="button" index="0" class="btn button btn-secondary">2</button>
          <button type="button" index="0" class="btn button btn-secondary">3</button>
          <button type="button" index="0" class="btn button btn-secondary">4</button>
          <button type="button" index="0" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 being you like to go out, 1 being you like to stay in.</small>
      </div>

      <!-- q2 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Are you outgoing or soft spoken?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="1" class="btn button btn-secondary">1</button>
          <button type="button" index="1" class="btn button btn-secondary">2</button>
          <button type="button" index="1" class="btn button btn-secondary">3</button>
          <button type="button" index="1" class="btn button btn-secondary">4</button>
          <button type="button" index="1" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 being you're outgoing, 1 being you're soft spoken.</small>
      </div>

      <!-- q3 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Do you listen to music or podcasts?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="2" class="btn button btn-secondary">1</button>
          <button type="button" index="2" class="btn button btn-secondary">2</button>
          <button type="button" index="2" class="btn button btn-secondary">3</button>
          <button type="button" index="2" class="btn button btn-secondary">4</button>
          <button type="button" index="2" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like chillin to some tunes, 1 you like to learn.</small>
      </div>

      <!-- q4 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Are you a coffee drinker or a tea drinker</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="3" class="btn button btn-secondary">1</button>
          <button type="button" index="3" class="btn button btn-secondary">2</button>
          <button type="button" index="3" class="btn button btn-secondary">3</button>
          <button type="button" index="3" class="btn button btn-secondary">4</button>
          <button type="button" index="3" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like coffee, 1 you like tea.</small>
      </div>

      <!-- q5 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Are you a dog person or a cat person</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="4" class="btn button btn-secondary">1</button>
          <button type="button" index="4" class="btn button btn-secondary">2</button>
          <button type="button" index="4" class="btn button btn-secondary">3</button>
          <button type="button" index="4" class="btn button btn-secondary">4</button>
          <button type="button" index="4" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like dogs, 1 you prefer cats.</small>
      </div>

      <!-- q6 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Do you like talking or do you prefer silence?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="5" class="btn button btn-secondary">1</button>
          <button type="button" index="5" class="btn button btn-secondary">2</button>
          <button type="button" index="5" class="btn button btn-secondary">3</button>
          <button type="button" index="5" class="btn button btn-secondary">4</button>
          <button type="button" index="5" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you can't stand silence, 1 you like peace and quite.</small>
      </div>

      <!-- q7 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Do you like horror movies?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="6" class="btn button btn-secondary">1</button>
          <button type="button" index="6" class="btn button btn-secondary">2</button>
          <button type="button" index="6" class="btn button btn-secondary">3</button>
          <button type="button" index="6" class="btn button btn-secondary">4</button>
          <button type="button" index="6" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like horror movies, 1 you don't like being scared.</small>
      </div>

      <!-- q8 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Are you a morning person or a night owl?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="7" class="btn button btn-secondary">1</button>
          <button type="button" index="7" class="btn button btn-secondary">2</button>
          <button type="button" index="7" class="btn button btn-secondary">3</button>
          <button type="button" index="7" class="btn button btn-secondary">4</button>
          <button type="button" index="7" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like having the morning to yourself, 1 you like to stay up late.</small>
      </div>

      <!-- q9 -->
      <div class="form-group">
        <label for="exampleInputEmail1">Morning shower or night shower?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="8" class="btn button btn-secondary">1</button>
          <button type="button" index="8" class="btn button btn-secondary">2</button>
          <button type="button" index="8" class="btn button btn-secondary">3</button>
          <button type="button" index="8" class="btn button btn-secondary">4</button>
          <button type="button" index="8" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you shower in the morning like a normal human, 1 you like to sleep clean.</small>
      </div>

      <!-- q10 -->
      <div class="form-group">
        <label for="exampleInputEmail1">PC or mac?</label>
        <br>
        <div id="q1" class="btn-group" role="group" aria-label="First group">
          <button type="button" index="9" class="btn button btn-secondary">1</button>
          <button type="button" index="9" class="btn button btn-secondary">2</button>
          <button type="button" index="9" class="btn button btn-secondary">3</button>
          <button type="button" index="9" class="btn button btn-secondary">4</button>
          <button type="button" index="9" class="btn button btn-secondary">5</button>
        </div>
        <small class="form-text text-muted">5 you like apple products, 1 you don't like spending unnecessary money.</small>
      </div>

      <!-- <button id="surveySubmit" type="submit" class="btn btn-primary">Submit</button> -->

      <!-- Button trigger modal -->
      <button id="surveySubmit" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Submit
      </button>

      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Your Closest Match!</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div id="profilePicture"></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>


    </form>
  </div>
</body>

<script>
  let scores = [];
  let pictureLink;
  let modal;

  let newProfile = {
    name: "",
    picture: "",
    scores: ""
  };

  $(".button").on("click", function (event) {
    event.preventDefault();
    let index = parseInt(this.getAttribute("index"));
    let number = parseInt(this.innerHTML);
    console.log("number: " + number);
    // parseInt(index);
    scores.splice(index, 1, number);
    console.log("scores array: " + scores);
  });

  $("#surveySubmit").on("click", function (event) {
    event.preventDefault();

    newProfile.name = $("#name").val();
    newProfile.pictureLink = $("#pictureURL").val();
    newProfile.scores = scores;

    console.log("foo");
    $.post("/api/friends", newProfile, function (data) {
      // put data (res from post request in apiRoutes with matching URL) into modal
      // console.log(data);
      console.log(data);
      $('.modal-body').text(data.name);
      $("#profilePicture").attr("src", data.photo);

      $("#myModal").modal("toggle");

    });
  });



</script>

</html>